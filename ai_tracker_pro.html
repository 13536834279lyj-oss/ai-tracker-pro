<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AI 全科素养追踪系统 PRO</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.1/dist/tailwind.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    body { background-color: #f3f4f6; }
</style>
</head>
<body class="min-h-screen flex flex-col items-center justify-start py-10">

<!-- 登录界面 -->
<div id="loginPage" class="w-full max-w-md bg-white shadow-xl rounded-2xl p-8">
    <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">AI 全科素养追踪系统 PRO</h2>
    <label class="block text-gray-700 mb-2">用户名</label>
    <input id="username" class="w-full mb-4 p-3 border rounded-lg" placeholder="输入用户名" />

    <label class="block text-gray-700 mb-2">密码</label>
    <input id="password" type="password" class="w-full mb-6 p-3 border rounded-lg" placeholder="输入密码" />

    <button onclick="login()" class="w-full bg-blue-600 text-white py-3 rounded-lg text-lg font-semibold hover:bg-blue-700">登录</button>
</div>

<!-- 主系统界面 -->
<div id="mainPage" class="hidden w-full max-w-7xl mx-auto p-6">

    <!-- 顶栏 -->
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold text-gray-800">AI 全科素养追踪系统 PRO</h1>
        <button onclick="logout()" class="bg-red-500 text-white py-2 px-4 rounded-lg">退出登录</button>
    </div>

    <!-- 过程性评价卡片 -->
    <div class="bg-white p-6 rounded-2xl shadow-lg mb-8 w-full">
        <h2 class="text-xl font-semibold mb-4 text-gray-700">过程性评价（AI 批注分析）</h2>

        <textarea id="annotationText" class="w-full h-32 p-3 border rounded-lg mb-4" placeholder="粘贴学生批注内容..."></textarea>
        <input id="keywords" class="w-full p-3 border rounded-lg mb-4" placeholder="关键词（逗号分隔）" />

        <button onclick="analyze()" class="bg-blue-600 text-white py-2 px-4 rounded-lg">分析批注</button>

        <div id="processResult" class="hidden mt-4 bg-gray-50 p-4 rounded-xl border">
            <p>字数：<span id="wordCount"></span></p>
            <p>关键词密度：<span id="keywordDensity"></span></p>
            <p>参与深度：<span id="engagementLevel"></span></p>
        </div>
    </div>

    <!-- 雷达图卡片 -->
    <div class="bg-white p-6 rounded-2xl shadow-lg mb-8 w-full">
        <h2 class="text-xl font-semibold mb-4 text-gray-700">终结性评价（素养雷达图）</h2>

        <div class="grid grid-cols-2 gap-4 mb-6">
            <div><label>语言表达</label><input type="range" id="language" min="0" max="100" value="70" class="w-full" /><span id="languageValue">70</span></div>
            <div><label>逻辑推理</label><input type="range" id="logic" min="0" max="100" value="65" class="w-full" /><span id="logicValue">65</span></div>
            <div><label>科学探究</label><input type="range" id="science" min="0" max="100" value="80" class="w-full" /><span id="scienceValue">80</span></div>
            <div><label>艺术表现</label><input type="range" id="art" min="0" max="100" value="75" class="w-full" /><span id="artValue">75</span></div>
            <div><label>数字素养</label><input type="range" id="digital" min="0" max="100" value="85" class="w-full" /><span id="digitalValue">85</span></div>
        </div>

        <button onclick="generateRadar()" class="bg-green-600 text-white py-2 px-4 rounded-lg">生成雷达图</button>
        <canvas id="radarChart" class="mt-4"></canvas>
    </div>

    <!-- 成长曲线卡片 + 学生数据保存 -->
    <div class="bg-white p-6 rounded-2xl shadow-lg w-full">
        <h2 class="text-xl font-semibold mb-4 text-gray-700">成长档案（学生素养发展）</h2>

        <label class="block mb-2">选择学生</label>
        <select id="studentSelect" class="w-full p-3 border rounded-lg mb-4"></select>

        <button onclick="showGrowth()" class="bg-purple-600 text-white py-2 px-4 rounded-lg mb-4">查看成长曲线</button>

        <canvas id="growthChart"></canvas>

        <button onclick="saveStudentData()" class="mt-6 bg-yellow-500 text-white py-2 px-4 rounded-lg">保存当前数据</button>
    </div>
</div>

<script>
// 登录系统
function login() {
    const user = document.getElementById("username").value;
    const pass = document.getElementById("password").value;
    if(user === "admin" && pass === "123456"){
        document.getElementById("loginPage").classList.add("hidden");
        document.getElementById("mainPage").classList.remove("hidden");
        loadStudents();
    } else {
        alert("用户名或密码错误！默认账号：admin / 123456");
    }
}
function logout(){
    document.getElementById("loginPage").classList.remove("hidden");
    document.getElementById("mainPage").classList.add("hidden");
}

// 批注分析
function analyze(){
    const annotation=document.getElementById("annotationText").value;
    const keywords=document.getElementById("keywords").value.split(",").map(k=>k.trim());
    const wordCount=annotation.length;
    const keywordCount=keywords.filter(k=>annotation.includes(k)).length;
    document.getElementById("wordCount").textContent=wordCount;
    document.getElementById("keywordDensity").textContent=((keywordCount/keywords.length)*100).toFixed(1)+"%";
    document.getElementById("engagementLevel").textContent=wordCount>200?"深度学习":"浅层学习";
    document.getElementById("processResult").classList.remove("hidden");
}

// 雷达图
let radarChart;
function generateRadar(){
    const ctx=document.getElementById("radarChart").getContext("2d");
    if(radarChart) radarChart.destroy();
    radarChart=new Chart(ctx,{type:"radar",data:{labels:["语言表达","逻辑推理","科学探究","艺术表现","数字素养"],datasets:[{label:"评分",data:[language.value,logic.value,science.value,art.value,digital.value],borderColor:"#2563eb",backgroundColor:"rgba(37, 99, 235, 0.2)"}]}});
}
["language","logic","science","art","digital"].forEach(id=>{document.getElementById(id).addEventListener("input",e=>{document.getElementById(id+"Value").textContent=e.target.value;})});

// 成长曲线 + 学生数据
let growthChart;
function loadStudents(){
    let students=JSON.parse(localStorage.getItem("students"))||{"学生A":[65,70,75,80,85],"学生B":[55,60,68,72,78],"学生C":[70,75,80,82,88]};
    const select=document.getElementById("studentSelect");
    select.innerHTML="";
    Object.keys(students).forEach(name=>{const opt=document.createElement("option");opt.value=name;opt.textContent=name;select.appendChild(opt);});
}
function showGrowth(){
    const name=document.getElementById("studentSelect").value;
    const students=JSON.parse(localStorage.getItem("students"));
    const data=students[name];
    const ctx=document.getElementById("growthChart").getContext("2d");
    if(growthChart) growthChart.destroy();
    growthChart=new Chart(ctx,{type:"line",data:{labels:["第1周","第2周","第3周","第4周","第5周"],datasets:[{label:name+" 素养得分",data:data,borderColor:"#9333ea",tension:0.3}]}});
}
function saveStudentData(){
    const name=document.getElementById("studentSelect").value;
    const students=JSON.parse(localStorage.getItem("students"));
    const newScore=Math.floor(Math.random()*20)+80;
    students[name].push(newScore);
    localStorage.setItem("students",JSON.stringify(students));
    alert("数据已保存！");
}
</script>
</body>
</html>