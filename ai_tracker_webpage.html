<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全科素养追踪系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50">
    <div class="max-w-7xl mx-auto p-5">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">AI驱动全科素养追踪系统</h1>
        
        <!-- 过程性评价模块 -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">过程性评价：AI行为数据分析</h2>
            <div class="mb-4">
                <label class="block text-gray-700 mb-2">学生批注内容：</label>
                <textarea id="annotationText" class="w-full h-32 p-3 border border-gray-300 rounded-md" placeholder="粘贴学生批注内容..."></textarea>
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 mb-2">关键词列表（逗号分隔）：</label>
                <input type="text" id="keywords" class="w-full p-3 border border-gray-300 rounded-md" placeholder="如：跨学科,批判性思维,科学原理...">
            </div>
            <button id="analyzeBtn" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-md">分析批注</button>
            
            <div id="processResult" class="mt-6 hidden">
                <h3 class="text-lg font-medium text-gray-700 mb-2">分析结果：</h3>
                <p>批注字数：<span id="wordCount" class="font-semibold"></span></p>
                <p>关键词密度：<span id="keywordDensity" class="font-semibold"></span></p>
                <p>参与深度：<span id="engagementLevel" class="font-semibold"></span></p>
            </div>
        </div>
        
        <!-- 终结性评价模块 -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">终结性评价：素养雷达图</h2>
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="block text-gray-700 mb-2">语言表达：</label>
                    <input type="range" id="language" min="0" max="100" value="70" class="w-full">
                    <span id="languageValue">70</span>
                </div>
                <div>
                    <label class="block text-gray-700 mb-2">逻辑推理：</label>
                    <input type="range" id="logic" min="0" max="100" value="65" class="w-full">
                    <span id="logicValue">65</span>
                </div>
                <div>
                    <label class="block text-gray-700 mb-2">科学探究：</label>
                    <input type="range" id="science" min="0" max="100" value="80" class="w-full">
                    <span id="scienceValue">80</span>
                </div>
                <div>
                    <label class="block text-gray-700 mb-2">艺术表现：</label>
                    <input type="range" id="art" min="0" max="100" value="75" class="w-full">
                    <span id="artValue">75</span>
                </div>
                <div>
                    <label class="block text-gray-700 mb-2">数字素养：</label>
                    <input type="range" id="digital" min="0" max="100" value="85" class="w-full">
                    <span id="digitalValue">85</span>
                </div>
            </div>
            <button id="generateRadarBtn" class="bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-md">生成雷达图</button>
            
            <div class="mt-6">
                <canvas id="radarChart" width="400" height="400"></canvas>
            </div>
        </div>
        
        <!-- 成长档案模块 -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">成长档案：素养发展曲线</h2>
            <div class="mb-4">
                <label class="block text-gray-700 mb-2">选择学生：</label>
                <select id="studentSelect" class="w-full p-2 border border-gray-300 rounded-md">
                    <option value="1">学生A</option>
                    <option value="2">学生B</option>
                    <option value="3">学生C</option>
                </select>
            </div>
            <button id="showGrowthBtn" class="bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-md">查看成长曲线</button>
            
            <div class="mt-6">
                <canvas id="growthChart" width="600" height="300"></canvas>
            </div>
        </div>
    </div>

    <script>
        // 过程性评价分析
        document.getElementById('analyzeBtn').addEventListener('click', function() {
            const annotation = document.getElementById('annotationText').value;
            const keywords = document.getElementById('keywords').value.split(',').map(k => k.trim());
            
            if (!annotation || keywords.length === 0) {
                alert('请输入批注内容和关键词');
                return;
            }
            
            const wordCount = annotation.length;
            const keywordCount = keywords.reduce((count, keyword) => {
                return count + (annotation.toLowerCase().includes(keyword.toLowerCase()) ? 1 : 0);
            }, 0);
            const keywordDensity = (keywordCount / keywords.length * 100).toFixed(2) + '%';
            const engagementLevel = wordCount > 200 && keywordCount > keywords.length * 0.6 ? '深度学习' : '浅层参与';
            
            document.getElementById('wordCount').textContent = wordCount;
            document.getElementById('keywordDensity').textContent = keywordDensity;
            document.getElementById('engagementLevel').textContent = engagementLevel;
            document.getElementById('processResult').classList.remove('hidden');
        });
        
        // 雷达图
        const radarCtx = document.getElementById('radarChart').getContext('2d');
        let radarChart = null;
        
        const sliders = ['language', 'logic', 'science', 'art', 'digital'];
        sliders.forEach(id => {
            const slider = document.getElementById(id);
            const valueSpan = document.getElementById(`${id}Value`);
            slider.addEventListener('input', function() {
                valueSpan.textContent = this.value;
            });
        });
        
        document.getElementById('generateRadarBtn').addEventListener('click', function() {
            const data = {
                labels: ['语言表达', '逻辑推理', '科学探究', '艺术表现', '数字素养'],
                datasets: [{
                    label: '素养评分',
                    data: [
                        parseInt(document.getElementById('language').value),
                        parseInt(document.getElementById('logic').value),
                        parseInt(document.getElementById('science').value),
                        parseInt(document.getElementById('art').value),
                        parseInt(document.getElementById('digital').value)
                    ],
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 2
                }]
            };
            
            if (radarChart) radarChart.destroy();
            radarChart = new Chart(radarCtx, {
                type: 'radar',
                data: data,
                options: {
                    scales: {
                        r: {
                            min: 0,
                            max: 100,
                            ticks: { stepSize: 20 }
                        }
                    }
                }
            });
        });
        
        // 成长曲线
        const growthCtx = document.getElementById('growthChart').getContext('2d');
        let growthChart = null;
        
        document.getElementById('showGrowthBtn').addEventListener('click', function() {
            const studentData = {
                '1': [65, 70, 75, 80, 85],
                '2': [55, 60, 68, 72, 78],
                '3': [70, 75, 80, 82, 88]
            };
            
            const selectedStudent = document.getElementById('studentSelect').value;
            const data = {
                labels: ['第1周', '第2周', '第3周', '第4周', '第5周'],
                datasets: [{
                    label: '综合素养得分',
                    data: studentData[selectedStudent],
                    fill: false,
                    borderColor: 'rgb(75, 192, 192)',
                    tension: 0.1
                }]
            };
            
            if (growthChart) growthChart.destroy();
            growthChart = new Chart(growthCtx, {
                type: 'line',
                data: data,
                options: {
                    scales: {
                        y: {
